"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{73692:function(e,t,s){var a=s(57437),r=s(2265),l=s(55343),n=s(74453),c=s(22023),i=s(74697),d=s(75733),o=s(37164),m=s(36127),x=s(82616),h=s(44828),u=s(96753),p=s(71106),b=s(88726);t.Z=e=>{let{file:t,onClose:s,className:g=""}=e,[j,v]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),[f,y]=(0,r.useState)(100),[Z,P]=(0,r.useState)(0),[k,E]=(0,r.useState)(!1),[C,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{S()},[]);let S=async()=>{try{D(!0)}catch(e){b.ZP.error("خطأ في فحص الصلاحيات، ولكن سيتم السماح بالوصول"),D(!0)}},H=async()=>{if(!t.downloadAllowed){b.ZP.error("التحميل غير مسموح لهذا الملف");return}v(!0);try{await new Promise(e=>setTimeout(e,2e3));let e="".concat(t.url,"?token=").concat(L(),"&expires=").concat(Date.now()+3e5),s=document.createElement("a");s.href=e,s.download=t.name,s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s),b.ZP.success("تم بدء التحميل بنجاح")}catch(e){b.ZP.error("فشل في التحميل، يرجى المحاولة مرة أخرى")}finally{v(!1)}},L=()=>Math.random().toString(36).substring(2)+Date.now().toString(36),T=e=>{switch(e){case"in":y(e=>Math.min(e+25,200));break;case"out":y(e=>Math.max(e-25,50));break;case"reset":y(100),P(0)}};return C?(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden ".concat(g),children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat(t.isProtected?"bg-white/20":"bg-white/10"),children:(0,a.jsx)(c.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:t.name}),(0,a.jsxs)("p",{className:"text-blue-100 text-sm",children:[t.size," • ",t.type.toUpperCase(),t.isProtected&&" • محمي بحقوق الطبع"]})]})]}),s&&(0,a.jsx)(l.E.button,{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})})]}),t.description&&(0,a.jsx)("p",{className:"mt-3 text-blue-100 text-sm leading-relaxed",children:t.description})]}),(0,a.jsx)("div",{className:"p-6",children:w?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(l.E.button,{onClick:()=>T("out"),className:"p-2 hover:bg-white rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 min-w-[60px] text-center",children:[f,"%"]}),(0,a.jsx)(l.E.button,{onClick:()=>T("in"),className:"p-2 hover:bg-white rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(h.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,a.jsx)(l.E.button,{onClick:()=>{P(e=>(e+90)%360)},className:"p-2 hover:bg-white rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(u.Z,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsx)(l.E.button,{onClick:()=>{E(!k)},className:"p-2 hover:bg-white rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)(p.Z,{className:"w-5 h-5 text-gray-600"})})]}),(0,a.jsx)(l.E.button,{onClick:()=>N(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"إغلاق المعاينة"})]}),(0,a.jsxs)("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden min-h-[400px] flex items-center justify-center",children:["pdf"===t.type?(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"معاينة ملف PDF"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"هذه منطقة معاينة آمنة لملف PDF"})]}):t.type.startsWith("doc")?(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"معاينة مستند Word"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"هذه منطقة معاينة آمنة لمستند Word"})]}):t.type.startsWith("ppt")?(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-orange-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"معاينة عرض تقديمي"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"هذه منطقة معاينة آمنة لعرض PowerPoint"})]}):t.type.startsWith("xls")?(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"معاينة جدول بيانات"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"هذه منطقة معاينة آمنة لملف Excel"})]}):(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"نوع الملف غير مدعوم للمعاينة"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"يمكنك تحميل الملف مباشرة"})]}),t.isProtected&&(0,a.jsx)("div",{className:"absolute top-4 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"محمي"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"معلومات الملف:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-700 font-medium",children:"النوع:"}),(0,a.jsx)("span",{className:"text-blue-800 mr-2",children:t.type.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-blue-700 font-medium",children:"الحجم:"}),(0,a.jsx)("span",{className:"text-blue-800 mr-2",children:t.size})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"text-blue-700 font-medium",children:"الحالة:"}),(0,a.jsx)("span",{className:"mr-2 ".concat(t.isProtected?"text-amber-800":"text-green-800"),children:t.isProtected?"محمي بحقوق الطبع":"متاح للتحميل"})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full flex items-center justify-center ".concat(t.isProtected?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"),children:t.isProtected?(0,a.jsx)(n.Z,{className:"w-10 h-10"}):(0,a.jsx)(d.Z,{className:"w-10 h-10"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:t.isProtected?"ملف محمي":"معاينة الملف"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:t.isProtected?"هذا الملف محمي بحقوق الطبع والنشر. يمكنك معاينته فقط دون إمكانية النسخ أو التحميل.":"يمكنك معاينة هذا الملف أو تحميله مباشرة."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.previewAvailable&&(0,a.jsxs)(l.E.button,{onClick:()=>{if(!t.previewAvailable){b.ZP.error("المعاينة غير متاحة لهذا الملف");return}N(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"معاينة الملف"]}),t.downloadAllowed&&(0,a.jsx)(l.E.button,{onClick:H,disabled:j,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",whileHover:j?void 0:{scale:1.05},whileTap:j?void 0:{scale:.95},children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"جاري التحميل..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"تحميل الملف"]})})]}),t.isProtected&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-800 text-sm",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"هذا الملف محمي بحقوق الطبع والنشر ولا يمكن نسخه أو مشاركته"})]})})]})})]}):(0,a.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center ".concat(g),children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"w-8 h-8 text-red-600"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"غير مسموح بالوصول"}),(0,a.jsx)("p",{className:"text-gray-600",children:"ليس لديك صلاحية للوصول إلى هذا الملف"})]})}},55625:function(e,t,s){var a=s(57437),r=s(2265),l=s(88726);t.Z=e=>{let{children:t,level:s="strict",showWarning:n=!0,bypassProtection:c=!1}=e,[i,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(c){d(!0);return}let e=!1,t=t=>{if("basic"!==s)return t.preventDefault(),n&&!e&&(l.ZP.error("النقر اليميني محظور لهذا المحتوى"),e=!0),!1},a=e=>{if("maximum"===s){if("F12"===e.key)return e.preventDefault(),n&&l.ZP.error("أدوات التطوير محظورة"),!1;if(e.ctrlKey&&"u"===e.key)return e.preventDefault(),n&&l.ZP.error("عرض المصدر محظور"),!1;if(e.ctrlKey&&"s"===e.key)return e.preventDefault(),n&&l.ZP.error("الحفظ محظور"),!1;if(e.ctrlKey&&"p"===e.key)return e.preventDefault(),n&&l.ZP.error("الطباعة محظورة"),!1;if(e.ctrlKey&&"a"===e.key)return e.preventDefault(),!1}},r=e=>{if("basic"!==s)return e.preventDefault(),!1},i=e=>{if("maximum"===s)return e.preventDefault(),!1},o=()=>{if("maximum"===s)return n&&l.ZP.error("لقطات الشاشة محظورة لهذا المحتوى"),!1};document.addEventListener("contextmenu",t),document.addEventListener("keydown",a),document.addEventListener("dragstart",r),document.addEventListener("selectstart",i);let m=null;return"maximum"===s&&(document.addEventListener("keydown",e=>{"PrintScreen"===e.key&&o()}),m=setInterval(()=>{"maximum"===s&&(window.outerHeight-window.innerHeight>160||window.outerWidth-window.innerWidth>160)&&(n&&l.ZP.error("أدوات التطوير محظورة"),window.close())},1e3)),d(!0),()=>{document.removeEventListener("contextmenu",t),document.removeEventListener("keydown",a),document.removeEventListener("dragstart",r),document.removeEventListener("selectstart",i),"maximum"===s&&m&&clearInterval(m)}},[s,n]),i)?(0,a.jsxs)("div",{className:"content-protection","data-protection-level":s,children:[n&&"basic"!==s&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-800 text-sm",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"هذا المحتوى محمي بحقوق الطبع والنشر ولا يمكن نسخه أو مشاركته"})]})}),(0,a.jsx)("div",{className:"protected-content ".concat("maximum"===s?"max-protection":""),children:t}),(0,a.jsxs)("div",{className:"absolute -top-96 -left-96 opacity-0 pointer-events-none select-none",children:["Protected Content - خطى التعليمية - ",new Date().toISOString()]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}}}]);